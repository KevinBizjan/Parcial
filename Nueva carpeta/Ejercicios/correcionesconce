üü• 1. Vehiculo.java (CORREGIDO Y COMPLETO)

PROBLEMAS DETECTADOS:

Setter de patente no normaliza a may√∫sculas

toString tiene un ' mal puesto

Falta equals/hashCode (pueden ped√≠rtelo)

‚¨áÔ∏è C√ìDIGO CORREGIDO:

package Parciales.Parcial2025.Segundo.Concesionario;

abstract class Vehiculo {
    protected String marca;
    protected int modelo;
    protected String patente;
    protected int kilometraje;

    public Vehiculo(String marca, int modelo, String patente, int kilometraje) {
        this.marca = marca.toUpperCase();
        this.modelo = modelo;
        this.patente = patente.toUpperCase();
        this.kilometraje = kilometraje;
    }

    // Getters
    public String getMarca() { return marca; }
    public int getModelo() { return modelo; }
    public String getPatente() { return patente; }
    public int getKilometraje() { return kilometraje; }

    // Setters
    public void setMarca(String marca) { this.marca = marca.toUpperCase(); }
    public void setModelo(int modelo) { this.modelo = modelo; }
    public void setPatente(String patente) { this.patente = patente.toUpperCase(); }
    public void setKilometraje(int kilometraje) { this.kilometraje = kilometraje; }

    public abstract String verTipoDeVehiculo();

    @Override
    public String toString() {
        return marca + "\t" + modelo + "\t" + patente + "\t" + kilometraje + "Km";
    }

    // ====== IGUALDAD ======
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;

        Vehiculo otro = (Vehiculo) obj;
        return this.patente.equalsIgnoreCase(otro.patente);
    }

    @Override
    public int hashCode() {
        return patente.toUpperCase().hashCode();
    }
}

üüß 2. Auto.java (CORREGIDO Y COMPLETO)

ERRORES GRAVES:

‚ùå No implementaba calcularPrecioVenta (rompe la interface)

‚ùå verTipoDeVehiculo devuelve solo emoji (inconsistente)

‚¨áÔ∏è C√ìDIGO CORREGIDO:

package Parciales.Parcial2025.Segundo.Concesionario;

class Auto extends Vehiculo implements Ventas {

    private int cantPuertas;

    public Auto(String marca, int modelo, String patente,
                int kilometraje, int cantPuertas)
            throws PuertasInsuficientesException {

        super(marca, modelo, patente, kilometraje);

        if (cantPuertas < 3) {
            throw new PuertasInsuficientesException(
                "Error: un auto debe tener al menos 3 puertas. Puertas recibidas: " 
                + cantPuertas);
        }

        this.cantPuertas = cantPuertas;
    }

    public int getCantPuertas() { return cantPuertas; }

    public void setCantPuertas(int cantPuertas) throws PuertasInsuficientesException {
        if (cantPuertas < 3) {
            throw new PuertasInsuficientesException(
                "Error: un auto debe tener al menos 3 puertas. Puertas recibidas: " 
                + cantPuertas);
        }
        this.cantPuertas = cantPuertas;
    }

    @Override
    public String verTipoDeVehiculo() {
        return "AUTO";
    }

    @Override
    public double calcularPrecioVenta(double precioBase, int anioActual) {
        int anios = anioActual - this.modelo;
        if (anios < 0) anios = 0;

        double depreciacion = anios * 0.10; // 10%
        if (depreciacion > 0.80) depreciacion = 0.80;

        return precioBase * (1 - depreciacion);
    }

    @Override
    public String toString() {
        return verTipoDeVehiculo() + "\t" + super.toString() + "\t" 
               + cantPuertas + " puertas";
    }
}

üü¶ 3. Moto.java (CORREGIDO Y COMPLETO)

‚¨áÔ∏è C√ìDIGO CORREGIDO:

package Parciales.Parcial2025.Segundo.Concesionario;

class Moto extends Vehiculo implements Ventas {

    public Moto(String marca, int modelo, String patente, int kilometraje) {
        super(marca, modelo, patente, kilometraje);
    }

    @Override
    public double calcularPrecioVenta(double precioBase, int anioActual) {
        int anios = anioActual - this.modelo;
        if (anios < 0) anios = 0;

        double depreciacion = anios * 0.08; // 8% anual
        if (depreciacion > 0.85) depreciacion = 0.85;

        double precio = precioBase * (1 - depreciacion);

        return precio * 0.90; // 10% descuento t√≠pico moto
    }

    @Override
    public String verTipoDeVehiculo() {
        return "MOTO";
    }

    @Override
    public String toString() {
        return verTipoDeVehiculo() + "\t" + super.toString();
    }
}

üü© 4. Inventario.java (CORRECCI√ìN COMPLETA)

ERRORES:

agregarAuto NO exist√≠a

eliminarVehiculo estaba mal

getCantidadDeVehiculos devuelve String (MAL)

equalsIgnoreCase faltaba

‚¨áÔ∏è C√ìDIGO CORREGIDO:

package Parciales.Parcial2025.Segundo.Concesionario;

import java.util.ArrayList;

public class Inventario {

    private ArrayList<Auto> autos;
    private ArrayList<Moto> motos;

    public Inventario() {
        autos = new ArrayList<>();
        motos = new ArrayList<>();
    }

    // ---------- AGREGAR ----------
    public boolean agregarAuto(Auto auto) {
        if (!existeVehiculo(auto.getPatente())) {
            autos.add(auto);
            return true;
        }
        return false;
    }

    public boolean agregarMoto(Moto moto) {
        if (!existeVehiculo(moto.getPatente())) {
            motos.add(moto);
            return true;
        }
        return false;
    }

    // ---------- BUSCAR ----------
    public Vehiculo buscarVehiculo(String patente) {
        if (patente == null) return null;

        String pat = patente.toUpperCase();

        for (Auto a : autos)
            if (a.getPatente().equalsIgnoreCase(pat)) return a;

        for (Moto m : motos)
            if (m.getPatente().equalsIgnoreCase(pat)) return m;

        return null;
    }

    // ---------- ELIMINAR ----------
    public boolean eliminarVehiculo(String patente) {
        Vehiculo v = buscarVehiculo(patente);
        if (v == null) return false;

        if (v instanceof Auto) return autos.remove(v);
        if (v instanceof Moto) return motos.remove(v);

        return false;
    }

    // ---------- ACTUALIZAR ----------
    public boolean actualizarAuto(String patente, Auto nuevo) {
        patente = patente.toUpperCase();
        for (int i = 0; i < autos.size(); i++) {
            if (autos.get(i).getPatente().equalsIgnoreCase(patente)) {
                autos.set(i, nuevo);
                return true;
            }
        }
        return false;
    }

    public boolean actualizarMoto(String patente, Moto nuevo) {
        patente = patente.toUpperCase();
        for (int i = 0; i < motos.size(); i++) {
            if (motos.get(i).getPatente().equalsIgnoreCase(patente)) {
                motos.set(i, nuevo);
                return true;
            }
        }
        return false;
    }

    // ---------- CANTIDAD ----------
    public int getCantidadDeVehiculos() {
        return autos.size() + motos.size();
    }

    // ---------- EXISTE ----------
    public boolean existeVehiculo(String patente) {
        return buscarVehiculo(patente) != null;
    }

    // ---------- LISTAR ----------
    public void listarTodosLosVehiculos() {
        System.out.println("\n=== INVENTARIO ===");

        System.out.println("\nAUTOS:");
        autos.forEach(a -> System.out.println(a));

        System.out.println("\nMOTOS:");
        motos.forEach(m -> System.out.println(m));

        System.out.println("\nTOTAL: " + getCantidadDeVehiculos());
    }
}

üü™ 5. Errores del Main corregidos

Tus errores en main estaban todos causados porque agregarAuto NO exist√≠a.
Con la nueva versi√≥n funciona perfecto.

EXCEPTION CODIGO
package Parciales.Parcial2025.Segundo.Concesionario;

/**
 * Excepci√≥n personalizada que se lanza cuando se intenta crear
 * un Auto con menos de 3 puertas.
 *
 * Es una excepci√≥n verificada (checked exception), por lo que
 * debe ser manejada obligatoriamente con try/catch o throws.
 */
public class PuertasInsuficientesException extends Exception {

    // Constructor por defecto: mensaje est√°ndar
    public PuertasInsuficientesException() {
        super("Error: un auto debe tener al menos 3 puertas.");
    }

    // Constructor con mensaje personalizado
    public PuertasInsuficientesException(String mensaje) {
        super(mensaje);
    }
}

